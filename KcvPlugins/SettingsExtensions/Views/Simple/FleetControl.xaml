<UserControl x:Class="AMing.SettingsExtensions.Views.Simple.FleetControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:converters="clr-namespace:AMing.SettingsExtensions.Converters"
             xmlns:amingdata="clr-namespace:AMing.SettingsExtensions.Data"
		     xmlns:controls="clr-namespace:Grabacr07.KanColleViewer.Views.Controls;assembly=KanColleViewer"
             xmlns:amingcontrols="clr-namespace:AMing.SettingsExtensions.Controls"
			 xmlns:ed="http://schemas.microsoft.com/expression/2010/drawing" 
             mc:Ignorable="d" 
			 SnapsToDevicePixels="True"
			 TextOptions.TextFormattingMode="Display"
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <converters:FleetsConverter x:Key="fleetsConverter" />
        <converters:FleetsColorConverter x:Key="fleetsColorConverter" />
        <converters:ArcLimitedValueConverter x:Key="arcLimitedValueConverter" />
        <converters:WarningColorConverter x:Key="warningColorConverter" />
        <converters:FuelColorConverter x:Key="fuelColorConverter" />

        <ItemsPanelTemplate x:Key="ItemsPanel_WrapPanel">
            <WrapPanel />
        </ItemsPanelTemplate>
        
        <DataTemplate x:Key="simpleFleetItem">
            <StackPanel>
                <StackPanel.Resources>
                    <Style TargetType="{x:Type TextBlock}"
										   BasedOn="{StaticResource DefaultTextStyleKey}">
                        <Setter Property="Margin"
												Value="10,0" />
                        <Setter Property="VerticalAlignment"
												Value="Bottom" />
                    </Style>
                    <Style TargetType="{x:Type ed:Arc}">
                        <Setter Property="SnapsToDevicePixels" Value="True" />
                    </Style>
                </StackPanel.Resources>
                <Grid HorizontalAlignment="Left"
									  Margin="0,5">
                    <Grid.RowDefinitions>
                        <RowDefinition />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition SharedSizeGroup="Type"
														  Width="Auto" />
                        <ColumnDefinition SharedSizeGroup="Name" />
                        <ColumnDefinition Width="Auto"
														  SharedSizeGroup="Level" />
                        <ColumnDefinition Width="Auto"
														  SharedSizeGroup="HP" />
                        <ColumnDefinition Width="Auto"
														  SharedSizeGroup="Condition" />
                        <ColumnDefinition Width="Auto"
														  SharedSizeGroup="Resources" />
                        <ColumnDefinition Width="Auto"
														  SharedSizeGroup="SlotItems" />
                    </Grid.ColumnDefinitions>

                    <TextBlock Grid.Column="3"
						Grid.Row="0"
						Grid.RowSpan="2"
						Margin="5,0" VerticalAlignment="Top" FontSize="13.333">
						<Run Text="{Binding Ship.Info.Name, Mode=OneWay}" />
                    </TextBlock>


                    <TextBlock Grid.Column="3"
						Grid.Row="1"
						Margin="5,0">
						<Run Text="Lv." FontSize="8" />
						<Run Text="{Binding Ship.Level, Mode=OneWay}" FontSize="10"  />
						<Run Text="Next:" FontSize="8" />
						<Run Text="{Binding Ship.ExpForNextLevel, Mode=OneWay}" FontSize="8" />
                    </TextBlock>

                    <TextBlock x:Name="HPText"
						Grid.Column="4"
						Grid.Row="0"
						Margin="5,0,5,10"
						Grid.RowSpan="2">
						<Run Text="HP:" FontSize="8" />
						<Run Text="{Binding Ship.HP.Current, Mode=OneWay}"  FontSize="12"/>
						<Run Text="/" FontSize="8" />
						<Run Text="{Binding Ship.HP.Maximum, Mode=OneWay}" FontSize="8" />
                    </TextBlock>
                    <controls:ColorIndicator x:Name="HPIndicator"
						Grid.Row="1"
						Grid.Column="4"
						Height="6"
						VerticalAlignment="Bottom"
						Margin="5,0"
						LimitedValue="{Binding Ship.HP, Mode=OneWay}" />

                    <Grid x:Name="RepairIndicator"
							Grid.Column="4"
							Grid.Row="0"
							Grid.RowSpan="2"
							Visibility="Collapsed">
                        <Border Background="{DynamicResource FleetRepairingBrushKey}"
							Opacity=".4"
							Margin="5,0" />
                        <TextBlock Text="入渠中"
							Style="{DynamicResource EmphaticTextStyleKey}"
							HorizontalAlignment="Center" />
                    </Grid>
                    <Grid Grid.Column="5" Margin="0,0.11,0,0" Grid.RowSpan="2" Height="25" VerticalAlignment="Bottom">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="24"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>

                        <Grid Margin="0" Grid.RowSpan="2" Width="20" Height="20" HorizontalAlignment="Left" VerticalAlignment="Bottom">

                            <TextBlock FontSize="8" Margin="0" Width="20" Height="20" Grid.RowSpan="1" VerticalAlignment="Center" HorizontalAlignment="Center" ><InlineUIContainer>
                    				<controls:ConditionIcon ConditionType="{Binding Ship.ConditionType, Mode=OneWay}" Width="20" Height="20" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="0" />
                    			</InlineUIContainer></TextBlock>
                            <TextBlock FontSize="10" Margin="0" Width="Auto" Height="Auto" Grid.RowSpan="1" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="#FF2C2C2C" ><Run Text="{Binding Ship.Condition, Mode=OneWay}"/></TextBlock>

                        </Grid>
                        <StackPanel Grid.Column="1" Orientation="Vertical" Grid.RowSpan="2" VerticalAlignment="Bottom">

                            <controls:ColorIndicator
                        		Width="50"
                        		LimitedValue="{Binding Ship.Fuel, Mode=OneWay}"
                        		Margin="0,0,0,5" Height="6" VerticalAlignment="Top" />

                            <controls:ColorIndicator
                        		Width="50"
                        		LimitedValue="{Binding Ship.Bull, Mode=OneWay}"
                        		Height="6"
                        		VerticalAlignment="Bottom" Margin="0" />
                        </StackPanel>
                    </Grid>
                </Grid>
                <Rectangle Height="1"
					Style="{DynamicResource SeparatorRectangleStyleKey}"
					Margin="0" />
            </StackPanel>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Ship.IsInRepairing}"
					Value="True">
                    <Setter TargetName="HPText"
						Property="Opacity"
						Value=".2" />
                    <Setter TargetName="HPIndicator"
						Property="Opacity"
						Value=".2" />
                    <Setter TargetName="RepairIndicator"
						Property="Visibility"
						Value="Visible" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
        <DataTemplate x:Key="Fleet_Arc">
            <Grid Width="120" Height="120">
                <Grid.Resources>
                    <Style TargetType="TextBlock">
                        <Setter Property="HorizontalAlignment" Value="Center" />
                        <Setter Property="TextTrimming" Value="CharacterEllipsis" />
                        <Setter Property="TextOptions.TextFormattingMode" Value="Ideal" />
                        <Setter Property="Foreground" Value="White" />
                    </Style>
                    <Style TargetType="ed:Arc">
                        <Setter Property="StrokeThickness" Value="0" />
                        <Setter Property="Stretch" Value="None" />
                    </Style>
                    <Style TargetType="ed:Arc" x:Key="arc_fuel">
                        <Setter Property="RenderTransformOrigin" Value="0.5,0.5" />
                        <Setter Property="ArcThickness" Value="4" />
                        <Setter Property="RenderTransform">
                            <Setter.Value>
                                <TransformGroup>
                                    <ScaleTransform ScaleY="1" ScaleX="-1"/>
                                    <SkewTransform AngleY="0" AngleX="0"/>
                                    <RotateTransform Angle="-1"/>
                                    <TranslateTransform/>
                                </TransformGroup>
                            </Setter.Value>
                        </Setter>
                        <Setter Property="Stretch" Value="None" />
                    </Style>
                </Grid.Resources>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition/>
                    <RowDefinition/>
                </Grid.RowDefinitions>
                <ed:Arc ArcThickness="55" EndAngle="360" Fill="#FF2D2D30" Margin="5" Grid.RowSpan="2" Grid.ColumnSpan="2"/>
                <Rectangle Fill="#FFDEDEDE" Height="1" StrokeThickness="0" VerticalAlignment="Top" Width="100" Grid.Row="1" Margin="10,10,10,0" Grid.ColumnSpan="2"/>
                <Grid x:Name="grid_hp" Grid.ColumnSpan="2" Margin="5" Grid.RowSpan="2" RenderTransformOrigin="0.5,0.5">
                    <Grid.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform ScaleY="1" ScaleX="-1"/>
                            <SkewTransform AngleY="0" AngleX="0"/>
                            <RotateTransform Angle="140"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Grid.RenderTransform>
                    <ed:Arc ArcThickness="7" EndAngle="280" Fill="#FFDEDEDE" />
                    <ed:Arc x:Name="arc_hp" 
                            Fill="{Binding Ship.HP, Mode=OneWay,Converter={StaticResource fleetsColorConverter}}"
                            StartAngle="{Binding Ship.HP, Mode=OneWay,Converter={StaticResource arcLimitedValueConverter},ConverterParameter=-280}"
                            ArcThickness="5" EndAngle="280"/>
                </Grid>
                <Grid Grid.ColumnSpan="2" Margin="13" Grid.RowSpan="2" RenderTransformOrigin="0.5,0.5">
                    <Grid.RenderTransform>
                        <TransformGroup>
                            <ScaleTransform/>
                            <SkewTransform/>
                            <RotateTransform Angle="14"/>
                            <TranslateTransform/>
                        </TransformGroup>
                    </Grid.RenderTransform>
                    <ed:Arc ArcThickness="4" Fill="#FFDEDEDE" EndAngle="87"/>
                    <ed:Arc 
                        Fill="{Binding Ship.Fuel, Mode=OneWay,Converter={StaticResource fuelColorConverter}}" 
                        EndAngle="{Binding Ship.Fuel, Mode=OneWay,Converter={StaticResource arcLimitedValueConverter},ConverterParameter=87}" 
                        ArcThickness="4"/>
                    <ed:Arc Fill="#FFDEDEDE" EndAngle="87" Style="{DynamicResource arc_fuel}"/>
                    <ed:Arc 
                        Fill="{Binding Ship.Bull, Mode=OneWay,Converter={StaticResource fuelColorConverter}}" 
                        EndAngle="{Binding Ship.Bull, Mode=OneWay,Converter={StaticResource arcLimitedValueConverter},ConverterParameter=87}" 
                        Style="{DynamicResource arc_fuel}"/>
                </Grid>
                <ContentControl Content="{Binding Ship.ConditionType, Mode=OneWay}" Margin="0,0,0,22" Grid.ColumnSpan="2" HorizontalAlignment="Center" Width="16" Height="16" VerticalAlignment="Bottom" >
                	<ContentControl.Resources>
                		<Style TargetType="{x:Type Path}" x:Key="ConditionIcon">
                			<Setter Property="Stretch" Value="UniformToFill" />
                			<Setter Property="HorizontalAlignment" Value="Center" />
                			<Setter Property="VerticalAlignment" Value="Center" />
                			<Setter Property="UseLayoutRounding" Value="False" />
                			<Setter Property="Width" Value="16" />
                			<Setter Property="Height" Value="16" />
                		</Style>

                		<DataTemplate x:Key="ConditionIcon_Brilliant">
                			<Path Style="{DynamicResource ConditionIcon}"
                				Data="M80.09,37.695c-0.044-0.224-0.223-0.491-0.817-0.491c-0.151,0-0.351,0.014-0.596,0.046l-15.441,2.002   c-0.878,0.12-1.896-0.492-2.226-1.286l-5.988-14.375c-0.271-0.653-0.508-1.031-0.914-1.031l-0.27,0.021l-0.149,0.17   c-0.188,0.213-0.224,0.547-0.136,1.233l2.004,15.442c0.112,0.87-0.477,1.89-1.286,2.227l-14.373,5.987   c-0.45,0.188-1.131,0.471-1.021,1.023c0.045,0.224,0.223,0.491,0.818,0.491c0.152,0,0.351-0.014,0.596-0.046l15.441-2.002   c0.879-0.111,1.896,0.493,2.227,1.286l5.986,14.374c0.271,0.653,0.508,1.031,0.914,1.031l0.27-0.021l0.149-0.17   c0.188-0.213,0.224-0.547,0.136-1.233L63.41,46.932c-0.112-0.869,0.477-1.889,1.287-2.226l14.373-5.987   C79.521,38.531,80.201,38.248,80.09,37.695zM30.635,39.144l5.75-2.395c0.181-0.075,0.453-0.188,0.408-0.41c-0.018-0.09-0.089-0.197-0.328-0.197   c-0.061,0-0.139,0.006-0.236,0.019l-6.178,0.802c-0.344,0.042-0.758-0.197-0.89-0.514l-2.395-5.751   c-0.108-0.261-0.203-0.413-0.366-0.413l-0.107,0.008l-0.061,0.068c-0.074,0.085-0.09,0.219-0.054,0.493l0.802,6.178   c0.045,0.348-0.19,0.755-0.514,0.89l-5.75,2.395c-0.181,0.075-0.453,0.188-0.408,0.41c0.018,0.09,0.089,0.197,0.328,0.197   c0.061,0,0.139-0.006,0.236-0.019l6.178-0.802c0.35-0.039,0.76,0.197,0.891,0.514l2.394,5.75c0.108,0.261,0.203,0.413,0.366,0.413   l0.107-0.009l0.061-0.068c0.074-0.085,0.09-0.219,0.054-0.493l-0.802-6.177C30.076,39.686,30.312,39.278,30.635,39.144zM56.707,65.45c-0.076,0-0.176,0.007-0.298,0.023l-7.721,1.002c-0.442,0.062-0.948-0.246-1.114-0.642l-2.992-7.19   c-0.137-0.326-0.255-0.514-0.458-0.514l-0.135,0.011l-0.075,0.085c-0.093,0.106-0.111,0.274-0.066,0.617l1,7.721   c0.057,0.435-0.237,0.945-0.643,1.114l-7.188,2.992c-0.225,0.094-0.564,0.236-0.51,0.513c0.023,0.112,0.111,0.245,0.409,0.245   c0.076,0,0.177-0.007,0.299-0.023l7.721-1c0.438-0.061,0.948,0.246,1.114,0.642l2.992,7.188c0.136,0.326,0.254,0.515,0.457,0.515   h0.001l0.135-0.011l0.075-0.085c0.093-0.107,0.111-0.274,0.066-0.617l-1.001-7.721c-0.058-0.435,0.237-0.944,0.642-1.113   l7.188-2.993c0.226-0.094,0.566-0.236,0.51-0.513C57.094,65.583,57.004,65.45,56.707,65.45z" 
                				Fill="#FFE0BA0D"/>
                		</DataTemplate>
                		<DataTemplate x:Key="ConditionIcon_Normal">
                			<Path Style="{DynamicResource ConditionIcon}" 
                				Data="M50,14c-19.882,0-36,16.118-36,36c0,19.882,16.118,36,36,36c19.883,0,36-16.118,36-36C86,30.118,69.883,14,50,14z    M60.429,32c3.55,0,6.429,4.029,6.429,9c0,4.97-2.879,9-6.429,9C56.878,50,54,45.97,54,41C54,36.029,56.878,32,60.429,32z    M39.571,32C43.122,32,46,36.029,46,41c0,4.97-2.877,9-6.428,9c-3.55,0-6.428-4.03-6.428-9C33.143,36.029,36.021,32,39.571,32z    M69.391,63.927c-0.237,0.355-5.953,8.699-19.391,8.699c-0.002,0-0.005-0.002-0.007-0.002c-0.003,0-0.005,0.002-0.008,0.002   c-13.437,0-19.153-8.344-19.39-8.699c-1.34-2.011-0.797-4.728,1.213-6.066c2.01-1.342,4.727-0.797,6.067,1.213   c0,0,0.004,0.006,0.005,0.007l0.01-0.007l-0.041-0.06c0.144,0.199,3.586,4.858,12.144,4.861c8.558-0.003,12-4.662,12.143-4.861   l-0.04,0.06l0.009,0.007c0.002-0.001,0.005-0.007,0.005-0.007c1.341-2.01,4.058-2.555,6.067-1.213   C70.188,59.199,70.73,61.916,69.391,63.927z" 
                				Fill="White"/>
                		</DataTemplate>
                		<DataTemplate x:Key="ConditionIcon_Tired">
                			<Path Style="{DynamicResource ConditionIcon}" 
                				Data="M50,14C30.118,14 14,30.118 14,50 14,69.883 30.119,86.001 50,86.001 69.881,86.001 86,69.883 86,50 86,30.118 69.882,14 50,14z M60.43,32C63.98,32 66.859,36.029 66.859,40.999 66.859,45.97 63.98,49.999 60.43,49.999 56.879,50 54,45.97 54,41 54,36.029 56.879,32 60.43,32z M39.571,32C43.122,32 46.001,36.029 46.001,40.999 46.001,45.97 43.122,49.999 39.571,49.999 36.022,49.999 33.143,45.97 33.143,40.999 33.143,36.029 36.022,32 39.571,32z M65.831,70.985C64.081,72.153 61.714,71.68 60.548,69.927 60.546,69.927 60.543,69.923 60.543,69.922L60.534,69.927 60.57,69.979C60.446,69.806 57.447,65.75 49.993,65.747 42.539,65.75 39.539,69.807 39.416,69.979L39.451,69.927 39.443,69.922C39.442,69.923 39.439,69.927 39.438,69.927 38.271,71.68 35.905,72.153 34.154,70.985 32.403,69.817 31.929,67.452 33.098,65.701 33.304,65.392 38.282,58.125 49.987,58.125 49.989,58.125 49.991,58.126 49.993,58.126 49.994,58.126 49.997,58.125 49.998,58.125 61.702,58.125 66.682,65.393 66.888,65.701 68.057,67.452 67.583,69.817 65.831,70.985z" 
                				Fill="#FFF5A865"/>
                		</DataTemplate>
                		<DataTemplate x:Key="ConditionIcon_OrangeTired">
                			<Path Style="{DynamicResource ConditionIcon}" 
                				Data="M50,14C30.118,14 14,30.118 14,50 14,69.883 30.119,86.001 50,86.001 69.881,86.001 86,69.883 86,50 86,30.118 69.882,14 50,14z M60.43,32C63.98,32 66.859,36.029 66.859,40.999 66.859,45.97 63.98,49.999 60.43,49.999 56.879,50 54,45.97 54,41 54,36.029 56.879,32 60.43,32z M39.571,32C43.122,32 46.001,36.029 46.001,40.999 46.001,45.97 43.122,49.999 39.571,49.999 36.022,49.999 33.143,45.97 33.143,40.999 33.143,36.029 36.022,32 39.571,32z M65.831,70.985C64.081,72.153 61.714,71.68 60.548,69.927 60.546,69.927 60.543,69.923 60.543,69.922L60.534,69.927 60.57,69.979C60.446,69.806 57.447,65.75 49.993,65.747 42.539,65.75 39.539,69.807 39.416,69.979L39.451,69.927 39.443,69.922C39.442,69.923 39.439,69.927 39.438,69.927 38.271,71.68 35.905,72.153 34.154,70.985 32.403,69.817 31.929,67.452 33.098,65.701 33.304,65.392 38.282,58.125 49.987,58.125 49.989,58.125 49.991,58.126 49.993,58.126 49.994,58.126 49.997,58.125 49.998,58.125 61.702,58.125 66.682,65.393 66.888,65.701 68.057,67.452 67.583,69.817 65.831,70.985z" 
                				Fill="#FFF18120"/>
                		</DataTemplate>
                		<DataTemplate x:Key="ConditionIcon_RedTired">
                			<Path Style="{DynamicResource ConditionIcon}" 
                				Data="M50,14C30.118,14 14,30.118 14,50 14,69.883 30.118,86 50,86 69.883,86 86,69.883 86,50 86,30.118 69.883,14 50,14z M33.143,41C33.143,36.029 36.021,32 39.572,32 43.122,32 46,36.03 46,41 46,45.97 43.122,50 39.572,50 36.021,50 33.143,45.97 33.143,41z M50.322,78.777C43.378,78.777 37.75,74.4 37.75,69 37.75,63.6 43.378,59.222 50.322,59.222 57.265,59.222 62.893,63.6 62.893,69 62.893,74.4 57.265,78.777 50.322,78.777z M60.43,50C56.879,50 54,45.97 54,41 54,36.029 56.879,32 60.43,32 63.98,32 66.858,36.029 66.858,41 66.857,45.97 63.979,50 60.43,50z" 
                				Fill="#FFF14920"/>
                		</DataTemplate>
                	</ContentControl.Resources>
                	<ContentControl.ContentTemplateSelector>
                		<amingcontrols:ConditionDataTemplateSelector 
                			Brilliant="{StaticResource ConditionIcon_Brilliant}"
                			Normal="{StaticResource ConditionIcon_Normal}"
                			Tired="{StaticResource ConditionIcon_Tired}"
                			OrangeTired="{StaticResource ConditionIcon_OrangeTired}"
                			RedTired="{StaticResource ConditionIcon_RedTired}"
                                />
                	</ContentControl.ContentTemplateSelector>
                </ContentControl>
                <TextBlock Margin="0,0,0,8" TextWrapping="Wrap" VerticalAlignment="Bottom" FontSize="10.667"  Grid.ColumnSpan="2" Foreground="#FFAAAAAA">
                    <Run Text="condition." FontSize="8" />
                    <Run Text="{Binding Ship.Condition, Mode=OneWay}" Foreground="#ddd" />
                </TextBlock>
                <Grid Grid.ColumnSpan="2" Margin="0,24,0,13" Grid.Row="1" HorizontalAlignment="Center">
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="10.667" Margin="0,9,0,0" Foreground="#FFAAAAAA">
                        <Run Text="Next." FontSize="8"/>
                        <Run Text="{Binding Ship.ExpForNextLevel, Mode=OneWay}" FontSize="8"/>
                    </TextBlock>
                    <TextBlock HorizontalAlignment="Left" VerticalAlignment="Top" FontSize="10.667" Margin="0" Foreground="#FFAAAAAA">
                        <Run Text="Level." FontSize="8"/>
                        <Run Text="{Binding Ship.Level, Mode=OneWay}" FontSize="8"/>
                    </TextBlock>
                </Grid>
                <TextBlock VerticalAlignment="Top" FontSize="13.333" Margin="0,10,0,0" Grid.Row="1" Grid.ColumnSpan="2"
                           Foreground="{Binding Ship.HP, Mode=OneWay,Converter={StaticResource warningColorConverter}}">
                    <Run Text="HP." FontSize="8"/>
                    <Run Text="{Binding Ship.HP.Current, Mode=OneWay}" FontSize="14"/>
                    <Run Text="/"/>
                    <Run Text="{Binding Ship.HP.Maximum, Mode=OneWay}" FontSize="10"/>
                </TextBlock>
                <TextBlock 
                    Text="{Binding Ship.Info.Name, Mode=OneWay}" 
                    Foreground="{Binding Ship.HP, Mode=OneWay,Converter={StaticResource warningColorConverter}}"
                    VerticalAlignment="Center" FontSize="13.333" Margin="12,0,17,0" Grid.RowSpan="2" Grid.ColumnSpan="2" />

                <Grid Grid.ColumnSpan="2" Grid.RowSpan="2" x:Name="RepairIndicator" Visibility="Collapsed">
                    <ed:Arc ArcThickness="55" EndAngle="360" Fill="#CC696969" Stretch="None" StrokeThickness="0" Margin="5"/>
                    <TextBlock HorizontalAlignment="Center" TextWrapping="Wrap" VerticalAlignment="Center" Text="入渠中" TextOptions.TextFormattingMode="Ideal" FontSize="18.667" Foreground="White"/>
                </Grid>
            </Grid>

            <DataTemplate.Triggers>
                <DataTrigger Binding="{Binding Ship.IsInRepairing}"
        			Value="True">
                    <Setter TargetName="RepairIndicator"
        				Property="Visibility"
        				Value="Visible" />
                </DataTrigger>
            </DataTemplate.Triggers>
        </DataTemplate>
    </UserControl.Resources>
    <ItemsControl
        d:DataContext="{d:DesignData /SampleData/FleetViewModelSampleData.xaml}"
        DataContext="{Binding Fleets.Fleets,Converter={StaticResource fleetsConverter}}"
        ItemsSource="{Binding Ships}"
		Margin="5" Grid.IsSharedSizeScope="True"
        ItemTemplate="{DynamicResource Fleet_Arc}" 
        ItemsPanel="{DynamicResource ItemsPanel_WrapPanel}">
    </ItemsControl>
</UserControl>
